\chapter{Evaluation}
\label{chapter:evaluation}

This chapter evaluates the system with respect to the original objectives, and it critically compares the projects approach to related work in the field. Specifically, it assesses the system's playability, identifies challenges encountered during development, and outlines solutions to these issues. The chapter also discusses the limitations of the system and suggests areas for future work.

\section{Playlability Analysis}
\label{sec:playability-analysis}



\section{Challenges and Solutions}

% \subsubsection{Input Relay and Data Synchronisation}
% Integrating the \texttt{xwiimote} library with the modified \texttt{WiimoteEmulator} fork presented challenges in synchronising accelerometer and IR data. Custom matrix transformations in \texttt{motion.c} and hand-tuned calibration routines ensured that the emulated signals closely replicated the physical Wii Remote behaviour. Additionally, the adoption of a binary protocol for transmitting sensor data reduced overhead and improved overall system responsiveness.

\subsubsection{IR Sensor Emulation}
At first, the IR emulation only mapped to the bottom half of the screen due to a scaling value error.

Originally, the vector for the three IR coordinates in the Wiimote emulators 3D space was as follows:
\begin{lstlisting}[style=CStyle, emph={vec3}, emphstyle={\color{magenta}}]
vec3 pointer_world = {(pointer_x - 0.5) * screen_width, (pointer_y - 0.5) * screen_width / screen_aspect, -screen_distance};
\end{lstlisting}

Changing removing the constant -0.5 and the screen aspect ratio from the y-coordinate calculation fixed the issue:
\begin{lstlisting}[style=CStyle, emph={vec3}, emphstyle={\color{magenta}}]
vec3 pointer_world = {(pointer_x - 0.5) * screen_width, (pointer_y)*screen_width, -screen_distance};
\end{lstlisting}

By correcting this error, the IR sensor data was correctly positioned on the screen, allowing for accurate pointing and cursor control. This fix was crucial for maintaining the playability of IR-dependent games.

\subsubsection{Audiovisual Streaming}

The audiovisual streaming component is a critical element in delivering an
engaging remote gameplay experience. The system utilises the Real-time Transport
Protocol (RTP) as its backbone for transmitting both video and audio streams.
RTP is well suited to handling real-time data over IP networks,
where timely delivery is as important as data integrity.

To minimise delay while preserving media quality, the streaming pipeline relies
on the open-source \texttt{ffmpeg} framework. The broadcasting script
(\texttt{broadcast-rtp.sh}) is finely tuned with parameters that target a
reduction in buffering and processing overhead. For example, flags such as
\texttt{-max\_delay 0} and \texttt{-fflags +nobuffer} ensure immediate
processing of incoming packets without accumulating extra data. Similarly, the
\texttt{-preset ultrafast} and \texttt{-tune zerolatency} options accelerate
encoding, even if this occasionally comes at the expense of compression
efficiency.

On the client side, the playback script (\texttt{play-rtp.sh}) mirrors these
optimisations by disabling internal buffering (\texttt{-fflags nobuffer}) and
enabling low-delay decoding strategies (\texttt{-flags low\_delay} and
\texttt{-framedrop}). The inclusion of a dedicated SDP file further aids in
accurately interpreting the stream parameters, reducing the initial
synchronisation overhead.

The combined effect of these settings is a streaming setup that strikes a
balance between media fidelity and transmission speed. Although higher quality
settings tend to increase processing delays, the current configuration offers a
compromise that preserves the authenticity of the Wii experience in remote
environments. % Iterative testing under varied network conditions has demonstrated
% that, while occasional buffering delays may occur, the system generally
% maintains acceptable audiovisual quality without compromising the interactive
% aspect of gameplay.

\subsubsection{Latency}

Latency is a central performance metric in this project, as it directly impacts
both the responsiveness of audiovisual feedback and the accuracy of input relays
during gameplay. The overall system latency encompasses several stages: video
capture, encoding, network transmission, decoding, and input processing. Each of
these stages has been the focus of targeted optimisation efforts.

On the streaming side, the low latency results from a combination of
high-speed encoding and aggressive buffering control. The use of \texttt{ffmpeg}
with options like \texttt{-g:v 1} (forcing every frame as a keyframe) helps in
rapid recovery and minimises delays during packet loss or re-synchronisation
events. The broadcasting pipeline’s non-buffered approach, as enforced by the
\texttt{-max\_delay 0} and \texttt{-fflags +nobuffer} flags, keeps the
end-to-end delay to a minimum, although this makes the system more
sensitive to network jitter.

The input relay component, responsible for transmitting controller data from the
Wii Remote to the emulator, further mitigates latency by employing non-blocking
I/O and a lightweight binary protocol. By packaging sensor data (IR and
accelerometer values) into fixed-length packets and transmitting them over UDP,
the system avoids the overhead associated with more complex data formats.
Additionally, reducing the polling interval in the \texttt{WiimoteEmulator} from
the original 20 ms to a shorter duration allows the system to react more swiftly
to user inputs.

Despite these efforts, some latency remains when compared to native Wii
gameplay. The inherent delay introduced by network transmission and the
processing limitations of the emulation environment contribute to a noticeable,
albeit reduced, lag. For fast-paced or highly reactive gaming scenarios, even
these minimised delays could affect user performance.

\section{Limitations}

Although the system meets its primary objectives, several limitations remain that constrain its overall performance and usability. In this section, each limitation is discussed in detail, accompanied by potential solutions to address them in future iterations.

\subsection{Peripheral Support}

One significant limitation of the current implementation is its restricted
support for peripheral devices. At present, the system only handles input from
the primary Wii Remote, excluding peripherals such as the nunchuck -- a crucial peripheral for many Wii
titles. This limitation not only narrows the scope of emulated experiences but
also diminishes the authenticity of gameplay, as many games rely on the
complementary inputs of both controllers. The absence of nunchuck support
restricts the system’s appeal and usability, especially for titles that require
coordinated two-handed control. Addressing this limitation would involve extending
the existing input relay architecture to include additional routines for
capturing and processing nunchuck signals.

\subsection{Scalability}

Another key limitation is the system’s scalability. During testing, the setup
was evaluated with only a single remote player, leaving its performance under
multi-user scenarios unexamined. This single-user focus raises concerns about
how the system will manage increased network load, concurrent input streams, and
potential synchronisation issues when multiple players connect simultaneously.
Scalability issues may manifest as network congestion, increased latency, or
even data loss in real-world multi-player environments. To resolve these
challenges, future research should incorporate scalability testing under
simulated conditions that mimic the demands of multiple concurrent connections.
Moreover, potential improvements might include optimising the network
communication protocols, adopting load balancing techniques, or restructuring
the input relay to efficiently handle the increased volume of simultaneous
inputs without compromising performance.

\subsection{Latency}

Latency remains a critical limitation, as it directly impacts both the
responsiveness of the audiovisual streaming and the precision of input relays.
Despite several optimisation strategies -- such as the use of non-blocking I/O,
aggressive buffering controls, and emulation improvements -- a noticeable delay
persists when compared to native Wii gameplay. This residual latency arises from
the cumulative delay introduced at various stages, including video capture,
encoding, network transmission, decoding, input processing, and emulation. Such
delays are particularly detrimental in fast-paced gaming scenarios where every
millisecond matters. To further mitigate latency, future work could explore more
advanced compression algorithms, refine the UDP transmission pipeline, or
experiment with alternative low-latency streaming protocols. Additionally,
implementing predictive buffering or adaptive latency compensation algorithms
might help offset some of the unavoidable delays, thereby enhancing the overall
responsiveness of the system.

\subsection{Accelerometer Calibration}

The final limitation concerns the calibration of the accelerometer emulation.
Currently, the system relies on hand-tuned parameters to interpret accelerometer
data, which may not be universally optimal across all games or user preferences.
This manual calibration approach can lead to inconsistencies, where the
sensitivity and accuracy of motion controls vary between different games. In
some cases, this might necessitate game-specific adjustments to achieve
satisfactory performance, thereby undermining the system’s general
applicability. A promising solution to this problem is the use of dynamic
calibration techniques that automatically adjust the accelerometer settings in
real time. Using these techniques, the system could analyse gameplay data on the
fly and fine-tune the calibration parameters to match the current game’s
requirements and individual user behaviour. Additionally, incorporating a
user-friendly calibration interface would empower users to make personalised
adjustments, further bridging the gap between the emulated inputs and the
original Wii experience. Furthermore, if the Wii Remote emulator was able to
perfectly replicate the accelerometer data then there would be no need for
calibration which would be the ideal solution.

\section{Reflection and Future Work}

% \subsection{Evaluation of Objectives}
% As stated in the \hyperlink{chapter:introduction}{Introduction} chapter, the key objectives of the project were:

% \begin{enumerate}
% 	\item  Develop a system to capture and stream the Wii’s video and audio output to remote players.
% 	\item Develop a system to relay the Wii Remote’s controller data over a low-latency network connection.
% 	\item Evaluate the system’s performance and user experience in a real-world setting.
% \end{enumerate}

% Reflecting on the project in respect to these objectives, it is clear that the project successfully fulfils all three objectives. The system developed is capable of capturing and streaming the Wii’s video and audio output to remote players, relaying the Wii Remote’s controller data over a low-latency network connection, and has been evaluated in a real-world setting. The \nameref{sec:playability-analysis} section demonstrates that the system is capable of providing a playable experience for users, despite some limitations.
%
\subsection{Evaluation of Objectives}
Reflecting on the project’s primary goals, it is evident that the system has successfully addressed the key challenges outlined in the \hyperlink{chapter:introduction}{Introduction}.

\subsubsection{Objective 1: Capturing and Streaming the Wii's Video and Audio Output}
This objective focuses on the development and integration of automated scripts
specifically designed to capture and stream the Wii's audiovisual data. The
broadcasting script (\texttt{broadcast-rtp.sh}) plays a crucial role by
leveraging the Real-time Transport Protocol (RTP) in conjunction with
\texttt{ffmpeg} to encode and transmit video and audio data with minimal
buffering. The script's carefully tuned parameters -- including non-buffered input,
forced keyframes, and low-latency encoding settings ensure that the streaming
pipeline efficiently manages the trade-off between media quality and
transmission delay. On the client side, the playback script
(\texttt{play-rtp.sh}) mirrors these optimisations to maintain synchronisation
and reduce decoding overhead. Together, these scripts automate the processes
required for capturing the Wii’s output, ensuring that remote players receive a
real-time and immersive multimedia experience.

\subsubsection{Objective 2: Relaying the Wii Remote's Controller Data over a Low-Latency Network Connection}
The second objective centres on the relay of controller data from the Wii Remote
to the Wiimote emulator. First, a custom Python-based input relay system, built
using the xwiimote Python bindings, captures real-time input events -- including
button presses, accelerometer data, and IR signals -- and translates them into
fixed-length binary packets. By adopting a lightweight binary protocol over UDP,
the input relay minimises overhead, thereby ensuring low-latency transmission.
In addition, enhancements made to the Wiimote Emulator enable it to accurately
interpret these packets, thereby seamlessly integrating the physical controller
inputs into the virtual environment. The combined approach of precise input
relay and robust Wii Remote emulation confirms that the system meets the
objective of providing responsive and accurate control for remote gameplay.

\subsubsection{Objective 3: Evaluating System Performance and User Experience}
The final objective involves a comprehensive playability analysis measuring
system performance under realistic conditions. This analysis quantifies latency
across different system stages, with detailed measurements assessing network
latency during data transmission, the overhead introduced by the emulation
process, and the interaction lag\cite{volkerseekerBestPaper} -- that is, the delay between a user’s input
and the corresponding on-screen response. The findings indicate that while the
latency is within a playable range, a measurable interaction lag remains. This
evaluation not only validates the system's capability to deliver a playable
gaming experience but also highlights specific areas where further optimisation
can bring the performance closer to that of native Wii gameplay.


\subsection{Comparison with Related Work}

\subsubsection{WiimoteEmulator}
The original \texttt{WiimoteEmulator} project by rnconrad and subsequent forks
(e.g., JRogaishio's version) primarily focused on emulating the Wii Remote for
local control using Bluetooth. In contrast, this work extends these foundations
by implementing IR and accelerometer emulation over IP sockets. This system adapts the concept of
Wii Remote emulation to enable remote gameplay -- a feature not present in the
original projects.

\subsubsection{Audiovisual Streaming in Remote Gaming}
Cloud gaming platforms traditionally deploy extensive infrastructure and
proprietary solutions to manage audiovisual streams. This allows for
high-quality, low-latency streaming, but it comes at huge monetary and technical
cost\cite{cloud_survey}. In contrast, this project's solution uses open-source tools and
protocols to achieve similar functionality. This system has higher latency and lower quality than
commercial cloud gaming services, but everything can run locally for free on low-end hardware.

\subsubsection{Wii Online Services}
The original Wii Online services offered a better user experience than this
project, as its design was tailor made for the Wii's hardware and software.
However, Nintendo discontinued these services in
2014\cite{nintendoTerminationNintendo}. Some third-party projects like Wiimmfi\cite{wiimmfi}
have focused on replicating the functionality of the Wii’s original online
services. However, many Nintendo Wii games have specific gameplay features that
require local multiplayer or never supported online play -- such as Wii Sports.
This project aims to address this limitation by enabling remote multiplayer
experiences for games that were not designed for online play.

\subsection{Future Work}

\subsubsection{Enhanced Peripheral Integration}
An avenue for future work involves expanding the system to support a broader
range of Wii peripherals. For example, incorporating the nunchuck would not only
enhance the gaming experience but also extend the system's compatibility with a
wider variety of games that rely on additional input modalities. This expansion
would require revisiting the current input relay architecture to integrate new
input types and handling the unique sensor characteristics of each peripheral.
Furthermore, the integration of these devices may necessitate revisions to the
calibration routines and error-handling mechanisms, ensuring that the system
processes the additional inputs with the same level of precision as the primary
Wii Remote.

\subsubsection{Scalability Testing}
Future work should focus on scalability testing to evaluate how the data relay
mechanisms perform when subjected to higher network loads. This entails setting
up experiments that mimic real-world scenarios with multiple simultaneous
connections, stressing the network to identify potential
bottlenecks or points of failure in the project. By adopting robust simulation and testing
methodologies, researchers could optimise the system’s architecture to better
manage concurrent data streams and ensure that performance degrades gracefully
under load. Ultimately, such testing will provide valuable insights into the
system’s resilience and inform subsequent iterations of both software and
hardware optimisations.

\subsubsection{Latency Optimisation}
Despite the progress made in reducing system latency, there is still room for
improvement, especially for fast-paced gaming scenarios. Future work should
explore advanced techniques for latency optimisation across all components of
the system. This could involve a deeper investigation into the
\texttt{WiimoteEmulator} fork and the input relay program to identify
bottlenecks and streamline existing hot paths. Additionally, examining
alternative RTP streaming parameters and exploring new network protocols might
reveal opportunities to shave off critical milliseconds of delay.

\subsubsection{Dynamic Calibration Techniques}
Another important direction for future research is the development of dynamic
calibration techniques for the accelerometer data. The current system relies on
hand-tuned parameters, which, while effective in a controlled setting, may not
perform optimally across different games or individual user preferences. Future
work could focus on implementing adaptive algorithms that automatically adjust
calibration settings in real time, using data gathered during gameplay. This
might involve leveraging machine learning models to predict optimal calibration
profiles based on user interactions or game-specific demands. By continuously
refining the calibration process, the system can provide more accurate input
replication, reducing discrepancies and further narrowing the performance gap
between the emulated and original Wii experiences.
